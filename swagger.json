{
  "openapi": "3.0.1",
  "info": {
    "title": "Civitai Orchestration API",
    "version": "v2",
    "x-logo": {
      "url": "https://wiki.civitai.com/images/1/17/Logo_%28Light%29.png",
      "backgroundColor": "#FFFFFF"
    }
  },
  "paths": {
    "/v2/providers/configurations": {
      "post": {
        "tags": [
          "Configurations"
        ],
        "operationId": "CreateConfiguration",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfigurationOptions"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfigurationOptions"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ConfigurationOptions"
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateConfigurationResult"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Configurations"
        ],
        "operationId": "QueryConfigurations",
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConfigurationStatus"
                }
              }
            }
          }
        }
      }
    },
    "/v2/providers/configurations/{configurationId}/options": {
      "get": {
        "tags": [
          "Configurations"
        ],
        "operationId": "GetConfiguration",
        "parameters": [
          {
            "name": "configurationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConfigurationOptions"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/v2/providers/configurations/{configurationId}": {
      "delete": {
        "tags": [
          "Configurations"
        ],
        "operationId": "DeleteConfiguration",
        "parameters": [
          {
            "name": "configurationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/v2/models/{air}": {
      "get": {
        "tags": [
          "Models"
        ],
        "operationId": "GetModel",
        "parameters": [
          {
            "name": "air",
            "in": "path",
            "required": true,
            "schema": {
              "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ModelInfo"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Models"
        ],
        "operationId": "InvalidateModel",
        "parameters": [
          {
            "name": "air",
            "in": "path",
            "required": true,
            "schema": {
              "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "No Content"
          }
        }
      }
    },
    "/v2/providers/workers/{workerId}/jobs": {
      "get": {
        "tags": [
          "WorkerJobs"
        ],
        "operationId": "GetJobs",
        "parameters": [
          {
            "name": "workerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "take",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "nullable": true
            }
          },
          {
            "name": "wait",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "nullable": true
            }
          },
          {
            "name": "claim",
            "in": "query",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Job"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/v2/providers/workers": {
      "post": {
        "tags": [
          "Workers"
        ],
        "operationId": "CreateWorker",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerRegistration"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerRegistration"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerRegistration"
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateWorkerResult"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Workers"
        ],
        "operationId": "QueryWorkers",
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WorkerDetails"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v2/providers/workers/{workerId}": {
      "get": {
        "tags": [
          "Workers"
        ],
        "operationId": "GetWorker",
        "parameters": [
          {
            "name": "workerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkerDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Workers"
        ],
        "operationId": "DeleteWorker",
        "parameters": [
          {
            "name": "workerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/v2/providers/workers/{workerId}/registration": {
      "get": {
        "tags": [
          "Workers"
        ],
        "operationId": "GetRegistration",
        "parameters": [
          {
            "name": "workerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkerRegistration"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Workers"
        ],
        "operationId": "UpdateWorkerRegistration",
        "parameters": [
          {
            "name": "workerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerRegistration"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerRegistration"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerRegistration"
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/v2/providers/workers/{workerId}/registration/assets": {
      "patch": {
        "tags": [
          "Workers"
        ],
        "operationId": "PatchWorkerAssets",
        "parameters": [
          {
            "name": "workerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": {
                  "$ref": "#/components/schemas/WorkerModelStatus"
                }
              }
            },
            "text/json": {
              "schema": {
                "type": "object",
                "additionalProperties": {
                  "$ref": "#/components/schemas/WorkerModelStatus"
                }
              }
            },
            "application/*+json": {
              "schema": {
                "type": "object",
                "additionalProperties": {
                  "$ref": "#/components/schemas/WorkerModelStatus"
                }
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/v2/consumer/workflows": {
      "post": {
        "tags": [
          "Workflows"
        ],
        "summary": "Submit a workflow for processing",
        "operationId": "SubmitWorkflow",
        "parameters": [
          {
            "name": "wait",
            "in": "query",
            "description": "Whether to wait for the job to complete before returning or to return immediately\r\nThe request may return a 202 if the clients waits for the workflow to complete and the workflow does not complete within the requested timeout. \r\nIn which case the client should use the token to query the status of the workflow.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 0
            }
          },
          {
            "name": "whatif",
            "in": "query",
            "description": "Whether to actually submit the workflow or return an estimate on what would happen upon submission",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Workflow"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/Workflow"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/Workflow"
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Workflow"
                }
              }
            }
          },
          "202": {
            "description": "Accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Workflow"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        },
        "callbacks": {
          "WorkflowCallback": {
            "{$request.query.callbackUrl}": {
              "post": {
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/WorkflowCallback"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server implementation should return this HTTP status code if the data was received successfully"
                  },
                  "4XX": {
                    "description": "If your server returns an HTTP status code indicating it does not understand the format of the payload the delivery will be treated as a failure. No retries are attempted."
                  },
                  "5XX": {
                    "description": "If your server returns an HTTP status code indicating a server-side error the delivery will be treated as a failure. retries are attempted."
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Workflows"
        ],
        "summary": "Query for workflows made by the user",
        "operationId": "QueryWorkflows",
        "parameters": [
          {
            "name": "cursor",
            "in": "query",
            "description": "An optional cursor to continue querying workflows from a previous query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "take",
            "in": "query",
            "description": "How many workflows to return",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 100
            }
          },
          {
            "name": "jobType",
            "in": "query",
            "description": "The type of job to filter on",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CursedArrayOfTelemetryCursorAndWorkflow"
                }
              }
            }
          }
        }
      }
    },
    "/v2/consumer/workflows/{workflowId}": {
      "get": {
        "tags": [
          "Workflows"
        ],
        "summary": "Get the status of a workflow",
        "operationId": "GetWorkflow",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "description": "The id of the workflow to get status for",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "wait",
            "in": "query",
            "description": "Whether to wait for the job to complete before returning or to return immediately\r\nThe workflow may return a 202 if the clients waits for the job to complete and the job does not complete within the requested timeout. \r\nIn which case the client should use the token to query the status of the job.",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Workflow"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Workflows"
        ],
        "summary": "Updates a request. This can currently be used to cancel a request",
        "operationId": "UpdateWorkflow",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "description": "The id of the request to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateWorkflowRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateWorkflowRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateWorkflowRequest"
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "204": {
            "description": "No Content"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Workflows"
        ],
        "summary": "Deletes a request and all its jobs",
        "operationId": "DeleteWorkflow",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "description": "The id of the request to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ConfigurationOptions": {
        "required": [
          "selector",
          "spec"
        ],
        "type": "object",
        "properties": {
          "priority": {
            "type": "integer",
            "description": "Get or set the priority of this configuration if multiple configurations apply to the same worker",
            "format": "int64"
          },
          "selector": {
            "$ref": "#/components/schemas/Expression"
          },
          "spec": {
            "description": "Get or set the specification associated with this configuration",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ConfigurationStatus": {
        "type": "object",
        "properties": {
          "configurationId": {
            "type": "string"
          },
          "assigned": {
            "type": "integer",
            "format": "int32"
          },
          "targeted": {
            "type": "integer",
            "format": "int32"
          },
          "applied": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "CreateConfigurationResult": {
        "type": "object",
        "properties": {
          "configurationId": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "CreateWorkerResult": {
        "type": "object",
        "properties": {
          "workerId": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "CursedArrayOfTelemetryCursorAndWorkflow": {
        "type": "object",
        "properties": {
          "next": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Workflow"
            }
          }
        },
        "additionalProperties": false
      },
      "DynamicAssignment": {
        "type": "object",
        "properties": {
          "fromPath": {
            "type": "string"
          },
          "toPath": {
            "type": "string"
          },
          "defaultValue": {
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "EchoInput": {
        "required": [
          "message"
        ],
        "type": "object",
        "properties": {
          "message": {
            "minLength": 1,
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "EchoOutput": {
        "required": [
          "message"
        ],
        "type": "object",
        "properties": {
          "message": {
            "minLength": 1,
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "EchoStep": {
        "required": [
          "$type",
          "input"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/WorkflowStep"
          }
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Get or set the name of this step so that it can be referenced by other steps",
            "nullable": true,
            "readOnly": true
          },
          "priority": {
            "$ref": "#/components/schemas/Priority"
          },
          "timeout": {
            "type": "string",
            "description": "The max amount of time to wait for a job generated by this node to complete before timing out",
            "nullable": true,
            "readOnly": true,
            "example": "00:00:00"
          },
          "retries": {
            "type": "integer",
            "description": "The max number of retries before we give up",
            "format": "int32",
            "nullable": true,
            "readOnly": true
          },
          "jobs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowStepJob"
            },
            "description": "Get the jobs generated by this step"
          },
          "status": {
            "$ref": "#/components/schemas/WorkflowStatus"
          },
          "input": {
            "$ref": "#/components/schemas/EchoInput"
          },
          "output": {
            "$ref": "#/components/schemas/EchoOutput"
          },
          "$type": {
            "enum": [
              "echo"
            ],
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "EcosystemElement": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/components/schemas/EcosystemElement"
        }
      },
      "Expression": {
        "type": "object",
        "additionalProperties": false
      },
      "Image": {
        "type": "object",
        "properties": {
          "blobKey": {
            "type": "string"
          },
          "available": {
            "type": "boolean"
          },
          "blobUrl": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "blobUrlExpirationDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ImageJobControlNet": {
        "type": "object",
        "properties": {
          "preprocessor": {
            "$ref": "#/components/schemas/ImageTransformer"
          },
          "weight": {
            "type": "number",
            "format": "double"
          },
          "startStep": {
            "type": "number",
            "format": "double"
          },
          "endStep": {
            "type": "number",
            "format": "double"
          },
          "blobKey": {
            "type": "string",
            "nullable": true
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ImageJobNetworkParams": {
        "type": "object",
        "properties": {
          "strength": {
            "type": "number",
            "description": "In case of Lora and LoCon, set the strength of the network",
            "format": "double",
            "nullable": true
          },
          "triggerWord": {
            "type": "string",
            "description": "In case of a TextualInversion, set the trigger word of the network",
            "nullable": true
          },
          "type": {
            "type": "string",
            "description": "A legacy type set by the consumer",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ImageJobParams": {
        "required": [
          "height",
          "width"
        ],
        "type": "object",
        "properties": {
          "prompt": {
            "type": "string",
            "nullable": true
          },
          "negativePrompt": {
            "type": "string",
            "nullable": true
          },
          "scheduler": {
            "$ref": "#/components/schemas/Scheduler"
          },
          "steps": {
            "maximum": 150,
            "minimum": 1,
            "type": "integer",
            "format": "int32"
          },
          "cfgScale": {
            "maximum": 30,
            "minimum": 1,
            "type": "number",
            "format": "double",
            "nullable": true
          },
          "width": {
            "maximum": 2048,
            "minimum": 64,
            "type": "integer",
            "format": "int32"
          },
          "height": {
            "maximum": 2048,
            "minimum": 64,
            "type": "integer",
            "format": "int32"
          },
          "seed": {
            "maximum": 4294967295,
            "minimum": -1,
            "type": "integer",
            "format": "int64"
          },
          "clipSkip": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "ImageResourceTrainingJob": {
        "required": [
          "$type",
          "params",
          "trainingData"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Job"
          }
        ],
        "properties": {
          "model": {
            "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
            "type": "string"
          },
          "trainingData": {
            "type": "string",
            "description": "A url referring data that needs to be trained upon",
            "format": "uri"
          },
          "params": {
            "type": "object",
            "additionalProperties": {},
            "description": "A untyped set of parameters that are associated with this job"
          },
          "cost": {
            "type": "number",
            "description": "Get cost associated with this job",
            "format": "double",
            "readOnly": true
          },
          "customCost": {
            "type": "number",
            "description": "Get or set a custom cost value for this job",
            "format": "double"
          },
          "output": {
            "type": "string",
            "description": "An application provided output of the current status of this job",
            "nullable": true
          },
          "type": {
            "type": "string",
            "readOnly": true
          },
          "claimDuration": {
            "type": "string",
            "description": "Rick: yeah i think for LoRA we need it to be 5-10 minutes.\r\nlora training has this lame effect where it can't send updates while it is uploading... so we need to give it extra buffer",
            "readOnly": true,
            "example": "00:00:00"
          },
          "$type": {
            "enum": [
              "ImageResourceTrainingJob"
            ],
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "ImageTransformer": {
        "enum": [
          "canny",
          "depthZoe",
          "softedgePidinet",
          "rembg"
        ],
        "type": "string"
      },
      "Job": {
        "required": [
          "$type"
        ],
        "type": "object",
        "properties": {
          "$type": {
            "type": "string"
          },
          "id": {
            "type": "string",
            "description": "A unique id for this job"
          },
          "createdAt": {
            "type": "string",
            "description": "The date when this job got created",
            "format": "date-time"
          },
          "expireAt": {
            "type": "string",
            "description": "The date for when this job was set to expire",
            "format": "date-time",
            "nullable": true
          },
          "webhook": {
            "type": "string",
            "description": "A webhook to be invoked when the job receives a status update",
            "format": "uri",
            "nullable": true
          },
          "properties": {
            "type": "object",
            "additionalProperties": {},
            "description": "A set of user defined properties that can be used to index and partition this job"
          },
          "type": {
            "type": "string",
            "description": "The type of this job as a string",
            "readOnly": true
          },
          "cost": {
            "type": "number",
            "description": "Get a cost estimate for this job",
            "format": "double",
            "readOnly": true
          },
          "maxRetryAttempt": {
            "type": "integer",
            "description": "The max number of retries before we give up",
            "format": "int32"
          },
          "dependencies": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/DynamicAssignment"
              },
              "nullable": true
            },
            "description": "Get or set a list of dependencies that this job has"
          },
          "issuedBy": {
            "type": "string",
            "description": "Get or set the name of the consumer that issued this job",
            "nullable": true
          },
          "version": {
            "type": "integer",
            "description": "Get or set the version of this job, this is used to track changes to the job schema",
            "format": "int32"
          },
          "claimDuration": {
            "type": "string",
            "description": "The total duration that the job can be claimed",
            "readOnly": true,
            "example": "00:00:00"
          }
        },
        "additionalProperties": false,
        "discriminator": {
          "propertyName": "$type",
          "mapping": {
            "ImageResourceTrainingJob": "#/components/schemas/ImageResourceTrainingJob",
            "LLMPromptAugmentationJob": "#/components/schemas/LLMPromptAugmentationJob",
            "SimilaritySearchJob": "#/components/schemas/SimilaritySearchJob",
            "TextToImageJob": "#/components/schemas/TextToImageJob",
            "TextToImageJobV2": "#/components/schemas/TextToImageJobV2"
          }
        }
      },
      "JobSupport": {
        "enum": [
          "unsupported",
          "unavailable",
          "available"
        ],
        "type": "string"
      },
      "LLMPromptAugmentationCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "LLMPromptAugmentationJob": {
        "required": [
          "$type",
          "model"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Job"
          }
        ],
        "properties": {
          "model": {
            "minLength": 1,
            "type": "string"
          },
          "basePrompt": {
            "type": "string",
            "nullable": true
          },
          "prompts": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "temp": {
            "type": "number",
            "format": "double"
          },
          "type": {
            "type": "string",
            "readOnly": true
          },
          "$type": {
            "enum": [
              "LLMPromptAugmentationJob"
            ],
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "ModelInfo": {
        "required": [
          "air",
          "downloadUrls",
          "hashes",
          "size"
        ],
        "type": "object",
        "properties": {
          "air": {
            "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
            "type": "string"
          },
          "size": {
            "type": "integer",
            "format": "int64"
          },
          "hashes": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          },
          "downloadUrls": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uri"
            }
          }
        },
        "additionalProperties": false
      },
      "Priority": {
        "enum": [
          "high",
          "normal",
          "low"
        ],
        "type": "string"
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": {}
      },
      "ProcessingStatistics": {
        "type": "object",
        "properties": {
          "totalJobsRequested": {
            "type": "integer",
            "format": "int64"
          },
          "totalCostRequested": {
            "type": "number",
            "format": "double"
          },
          "totalJobsSucceeded": {
            "type": "integer",
            "format": "int64"
          },
          "totalCostSucceeded": {
            "type": "number",
            "format": "double"
          },
          "totalJobsRejected": {
            "type": "integer",
            "format": "int64"
          },
          "totalCostRejected": {
            "type": "number",
            "format": "double"
          },
          "totalJobsLateRejected": {
            "type": "integer",
            "format": "int64"
          },
          "totalCostLateRejected": {
            "type": "number",
            "format": "double"
          },
          "totalJobsExpired": {
            "type": "integer",
            "format": "int64"
          },
          "totalCostExpired": {
            "type": "number",
            "format": "double"
          },
          "totalJobsFailed": {
            "type": "integer",
            "format": "int64"
          },
          "totalCostFailed": {
            "type": "number",
            "format": "double"
          },
          "totalJobsCompleted": {
            "type": "integer",
            "format": "int64",
            "readOnly": true
          },
          "totalCostCompleted": {
            "type": "number",
            "format": "double",
            "readOnly": true
          }
        },
        "additionalProperties": false
      },
      "Scheduler": {
        "enum": [
          "eulerA",
          "euler",
          "lms",
          "heun",
          "dpm2",
          "dpm2A",
          "dpm2SA",
          "dpm2M",
          "dpmSDE",
          "dpmFast",
          "dpmAdaptive",
          "lmsKarras",
          "dpm2Karras",
          "dpm2AKarras",
          "dpm2SAKarras",
          "dpm2MKarras",
          "dpmsdeKarras",
          "ddim",
          "plms",
          "uniPC",
          "undefined",
          "lcm",
          "ddpm",
          "deis"
        ],
        "type": "string"
      },
      "SimilaritySearchJob": {
        "required": [
          "$type",
          "model",
          "nsfwFilter",
          "params",
          "prompt"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Job"
          }
        ],
        "properties": {
          "model": {
            "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
            "type": "string"
          },
          "nsfwFilter": {
            "minLength": 1,
            "type": "string"
          },
          "prompt": {
            "minLength": 1,
            "type": "string"
          },
          "params": {
            "type": "object",
            "additionalProperties": {}
          },
          "cost": {
            "type": "number",
            "format": "double",
            "readOnly": true
          },
          "type": {
            "type": "string",
            "readOnly": true
          },
          "$type": {
            "enum": [
              "SimilaritySearchJob"
            ],
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "Subscription": {
        "type": "object",
        "properties": {
          "webhook": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "TextToImageInput": {
        "required": [
          "height",
          "model",
          "width"
        ],
        "type": "object",
        "properties": {
          "quantity": {
            "maximum": 100,
            "minimum": 1,
            "type": "integer",
            "description": "Get or sets the number of images to generate in a batch",
            "format": "int32"
          },
          "batchSize": {
            "maximum": 100,
            "minimum": 1,
            "type": "integer",
            "description": "The size of each batch",
            "format": "int32"
          },
          "model": {
            "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
            "type": "string",
            "description": "The AIR of the checkpoint model to use for generation"
          },
          "additionalNetworks": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/ImageJobNetworkParams"
            },
            "description": "Get or set a associative list of additional networks. Use the AIR of the network as the key."
          },
          "controlNets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageJobControlNet"
            },
            "description": "Get or set a associative list of additional networks."
          },
          "prompt": {
            "type": "string",
            "nullable": true
          },
          "negativePrompt": {
            "type": "string",
            "nullable": true
          },
          "scheduler": {
            "$ref": "#/components/schemas/Scheduler"
          },
          "steps": {
            "maximum": 150,
            "minimum": 1,
            "type": "integer",
            "format": "int32"
          },
          "cfgScale": {
            "maximum": 30,
            "minimum": 1,
            "type": "number",
            "format": "double",
            "nullable": true
          },
          "width": {
            "maximum": 2048,
            "minimum": 64,
            "type": "integer",
            "format": "int32"
          },
          "height": {
            "maximum": 2048,
            "minimum": 64,
            "type": "integer",
            "format": "int32"
          },
          "seed": {
            "maximum": 4294967295,
            "minimum": 0,
            "type": "integer",
            "format": "int64"
          },
          "clipSkip": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "TextToImageJob": {
        "required": [
          "$type"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Job"
          }
        ],
        "properties": {
          "model": {
            "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
            "type": "string"
          },
          "params": {
            "$ref": "#/components/schemas/ImageJobParams"
          },
          "imageHash": {
            "type": "string"
          },
          "additionalNetworks": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/ImageJobNetworkParams"
            },
            "description": "Get or set a associative list of additional networks. Each network is identified by a hash code"
          },
          "destinationUrl": {
            "type": "string",
            "description": "Get or set the URL where the image will be uploaded to",
            "format": "uri",
            "nullable": true
          },
          "storeAsBlob": {
            "type": "boolean",
            "description": "Wether to store the image as a blob or as a legacy image"
          },
          "controlNets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageJobControlNet"
            },
            "description": "Get or set a list of control nets that should be applied with this textToImage job"
          },
          "cost": {
            "type": "number",
            "format": "double",
            "readOnly": true
          },
          "claimDuration": {
            "type": "string",
            "readOnly": true,
            "example": "00:00:00"
          },
          "type": {
            "type": "string",
            "readOnly": true
          },
          "$type": {
            "enum": [
              "TextToImageJob"
            ],
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "TextToImageJobSlot": {
        "type": "object",
        "properties": {
          "imageHash": {
            "type": "string"
          },
          "destinationUrl": {
            "type": "string",
            "format": "uri"
          }
        },
        "additionalProperties": false
      },
      "TextToImageJobV2": {
        "required": [
          "$type"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Job"
          }
        ],
        "properties": {
          "model": {
            "pattern": "^(?:urn:)?(?:air:)?(?:(?<ecosystem>[a-zA-Z0-9_\\-\\/]+):)?(?:(?<type>[a-zA-Z0-9_\\-\\/]+):)?(?<source>[a-zA-Z0-9_\\-\\/]+):(?<id>[a-zA-Z0-9_\\-\\/\\.]+)(?:@(?<version>[a-zA-Z0-9_\\-\\.]+))?(?:\\.(?<format>[a-zA-Z0-9_\\-]+))?$",
            "type": "string"
          },
          "params": {
            "$ref": "#/components/schemas/ImageJobParams"
          },
          "slots": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TextToImageJobSlot"
            }
          },
          "additionalNetworks": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/ImageJobNetworkParams"
            },
            "description": "Get or set a associative list of additional networks. Each network is identified by a hash code"
          },
          "controlNets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageJobControlNet"
            },
            "description": "Get or set a list of control nets that should be applied with this textToImage job"
          },
          "cost": {
            "type": "number",
            "format": "double",
            "readOnly": true
          },
          "claimDuration": {
            "type": "string",
            "readOnly": true,
            "example": "00:00:00"
          },
          "type": {
            "type": "string",
            "readOnly": true
          },
          "$type": {
            "enum": [
              "TextToImageJobV2"
            ],
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "TextToImageOutput": {
        "type": "object",
        "properties": {
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Image"
            }
          }
        },
        "additionalProperties": false
      },
      "TextToImageStep": {
        "required": [
          "$type",
          "input"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/WorkflowStep"
          }
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Get or set the name of this step so that it can be referenced by other steps",
            "nullable": true,
            "readOnly": true
          },
          "priority": {
            "$ref": "#/components/schemas/Priority"
          },
          "timeout": {
            "type": "string",
            "description": "The max amount of time to wait for a job generated by this node to complete before timing out",
            "nullable": true,
            "readOnly": true,
            "example": "00:00:00"
          },
          "retries": {
            "type": "integer",
            "description": "The max number of retries before we give up",
            "format": "int32",
            "nullable": true,
            "readOnly": true
          },
          "jobs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowStepJob"
            },
            "description": "Get the jobs generated by this step"
          },
          "status": {
            "$ref": "#/components/schemas/WorkflowStatus"
          },
          "input": {
            "$ref": "#/components/schemas/TextToImageInput"
          },
          "output": {
            "$ref": "#/components/schemas/TextToImageOutput"
          },
          "$type": {
            "enum": [
              "textToImage"
            ],
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "TransactionInfo": {
        "required": [
          "id"
        ],
        "type": "object",
        "properties": {
          "amount": {
            "type": "integer",
            "format": "int32"
          },
          "id": {
            "minLength": 1,
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UpdateWorkflowRequest": {
        "type": "object",
        "properties": {
          "status": {
            "$ref": "#/components/schemas/UpdateWorkflowStatus"
          }
        },
        "additionalProperties": false
      },
      "UpdateWorkflowStatus": {
        "enum": [
          "canceled"
        ],
        "type": "string",
        "nullable": true
      },
      "WorkerCapabilities": {
        "type": "object",
        "properties": {
          "image": {
            "$ref": "#/components/schemas/WorkerImageCapabilities"
          },
          "media": {
            "$ref": "#/components/schemas/WorkerMediaCapabilities"
          },
          "modelManagement": {
            "$ref": "#/components/schemas/WorkerModelPreparationCapabilities"
          },
          "configurationManagement": {
            "$ref": "#/components/schemas/WorkerConfigurationCapabilities"
          },
          "similaritySearch": {
            "$ref": "#/components/schemas/WorkerSimilaritySearchCapabilities"
          },
          "llmPromptAugmentation": {
            "$ref": "#/components/schemas/LLMPromptAugmentationCapabilities"
          }
        },
        "additionalProperties": false
      },
      "WorkerConfigurationCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerDetails": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "activeJobs": {
            "type": "integer",
            "format": "int32"
          },
          "queueSize": {
            "type": "integer",
            "format": "int32"
          },
          "queueDepth": {
            "type": "number",
            "format": "double"
          },
          "startDate": {
            "type": "string",
            "format": "date-time"
          },
          "lastRequestDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "expirationDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "statistics": {
            "$ref": "#/components/schemas/ProcessingStatistics"
          },
          "succeededThroughputRate": {
            "type": "number",
            "format": "double"
          },
          "failedThroughputRate": {
            "type": "number",
            "format": "double"
          },
          "idleRate": {
            "type": "number",
            "format": "double"
          },
          "lastSuccesfullyCompletedJobDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "lastJobUpdateDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "subscriptionSetDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "quarantineDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "WorkerImageCapabilities": {
        "type": "object",
        "properties": {
          "textToImage": {
            "$ref": "#/components/schemas/WorkerImageTextToImageCapabilities"
          },
          "imageToImage": {
            "$ref": "#/components/schemas/WorkerImageImageToImageCapabilities"
          },
          "transform": {
            "$ref": "#/components/schemas/WorkerImageTransformCapabilities"
          },
          "resourceTraining": {
            "$ref": "#/components/schemas/WorkerImageResourceTrainingCapabilities"
          },
          "embedding": {
            "$ref": "#/components/schemas/WorkerImageEmbeddingCapabilities"
          }
        },
        "additionalProperties": false
      },
      "WorkerImageEmbeddingCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerImageImageToImageCapabilities": {
        "type": "object",
        "properties": {
          "size": {
            "type": "integer",
            "description": "Max size supported (as square)",
            "format": "int32"
          },
          "schedulers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Scheduler"
            },
            "description": "Schedulers supported"
          },
          "controlNet": {
            "maximum": 10,
            "minimum": 0,
            "type": "integer",
            "description": "The number of controlnets that can be used in tandem",
            "format": "int32"
          },
          "inpainting": {
            "type": "boolean",
            "description": "Whether or not inpainting is supported"
          }
        },
        "additionalProperties": false
      },
      "WorkerImageResourceTrainingCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerImageTextToImageCapabilities": {
        "type": "object",
        "properties": {
          "size": {
            "type": "integer",
            "description": "Max size supported (as square)",
            "format": "int32"
          },
          "schedulers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Scheduler"
            },
            "description": "Schedulers supported"
          },
          "controlNet": {
            "maximum": 10,
            "minimum": 0,
            "type": "integer",
            "description": "The number of controlnets that can be used in tandem",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "WorkerImageTransformCapabilities": {
        "type": "object",
        "properties": {
          "transformers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageTransformer"
            },
            "description": "Max size supported (as square)"
          }
        },
        "additionalProperties": false
      },
      "WorkerMediaCapabilities": {
        "type": "object",
        "properties": {
          "wdTagging": {
            "$ref": "#/components/schemas/WorkerMediaWDTaggingCapabilities"
          },
          "comfy": {
            "$ref": "#/components/schemas/WorkerMediaComfyCapabilities"
          },
          "tagging": {
            "$ref": "#/components/schemas/WorkerMediaTaggingCapabilities"
          },
          "movieRating": {
            "$ref": "#/components/schemas/WorkerMediaMovieRatingCapabilities"
          }
        },
        "additionalProperties": false
      },
      "WorkerMediaComfyCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerMediaMovieRatingCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerMediaTaggingCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerMediaWDTaggingCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerModelAvailability": {
        "enum": [
          "unknown",
          "unsupported",
          "unavailable",
          "available",
          "providerUnsupported"
        ],
        "type": "string"
      },
      "WorkerModelPreparationCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerModelStatus": {
        "type": "object",
        "properties": {
          "availability": {
            "$ref": "#/components/schemas/WorkerModelAvailability"
          },
          "cost": {
            "type": "number",
            "format": "float"
          }
        },
        "additionalProperties": false
      },
      "WorkerRegistration": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "onDemandModelTypesAsArray": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "onDemandModelTypes": {
            "uniqueItems": true,
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "capabilities": {
            "$ref": "#/components/schemas/WorkerCapabilities"
          },
          "subscription": {
            "$ref": "#/components/schemas/Subscription"
          },
          "type": {
            "$ref": "#/components/schemas/WorkerType"
          },
          "concurrentLimit": {
            "type": "integer",
            "description": "How many requests you can handle at once",
            "format": "int32"
          },
          "ecosystems": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/EcosystemElement"
            },
            "description": "The ecosystems supported by this worker"
          },
          "models": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/WorkerModelStatus"
            },
            "description": "A list of assets that are currently unavailable by this worker\r\nThis is the counterpart of assets"
          },
          "cacheLevel": {
            "type": "string",
            "description": "The name of the closest cache level that this worker can interact with",
            "nullable": true
          },
          "maxColdSwapQueueSize": {
            "type": "integer",
            "description": "The max queue size before we stop accepting requests that require cold swapping",
            "format": "int32",
            "nullable": true
          },
          "maxPendingModelSize": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "consumeUnavailableJobs": {
            "type": "boolean",
            "description": "Wether the worker should consume jobs that are not yet available"
          },
          "nodeIdentifier": {
            "type": "string",
            "description": "An optional identified that uniquely identifies this worker",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "WorkerSimilaritySearchCapabilities": {
        "type": "object",
        "additionalProperties": false
      },
      "WorkerType": {
        "enum": [
          "normal",
          "deferred"
        ],
        "type": "string"
      },
      "Workflow": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "transactions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TransactionInfo"
            },
            "nullable": true
          },
          "properties": {
            "type": "object",
            "additionalProperties": {},
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/WorkflowStatus"
          },
          "steps": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowStep"
            }
          },
          "callbacks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowCallback"
            }
          }
        },
        "additionalProperties": false
      },
      "WorkflowCallback": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "format": "uri"
          },
          "type": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "workflow:succeeded"
            }
          }
        },
        "additionalProperties": false
      },
      "WorkflowStatus": {
        "enum": [
          "unassigned",
          "preparing",
          "scheduled",
          "processing",
          "succeeded",
          "failed",
          "expired",
          "canceled"
        ],
        "type": "string"
      },
      "WorkflowStep": {
        "required": [
          "$type"
        ],
        "type": "object",
        "properties": {
          "$type": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "description": "Get or set the name of this step so that it can be referenced by other steps",
            "nullable": true,
            "readOnly": true
          },
          "priority": {
            "$ref": "#/components/schemas/Priority"
          },
          "timeout": {
            "type": "string",
            "description": "The max amount of time to wait for a job generated by this node to complete before timing out",
            "nullable": true,
            "readOnly": true,
            "example": "00:00:00"
          },
          "retries": {
            "type": "integer",
            "description": "The max number of retries before we give up",
            "format": "int32",
            "nullable": true,
            "readOnly": true
          },
          "jobs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowStepJob"
            },
            "description": "Get the jobs generated by this step"
          },
          "status": {
            "$ref": "#/components/schemas/WorkflowStatus"
          }
        },
        "additionalProperties": false,
        "discriminator": {
          "propertyName": "$type",
          "mapping": {
            "textToImage": "#/components/schemas/TextToImageStep",
            "echo": "#/components/schemas/EchoStep"
          }
        }
      },
      "WorkflowStepJob": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "cost": {
            "type": "number",
            "format": "double"
          },
          "status": {
            "$ref": "#/components/schemas/WorkflowStatus"
          },
          "queuePosition": {
            "$ref": "#/components/schemas/WorkflowStepJobQueuePosition"
          }
        },
        "additionalProperties": false
      },
      "WorkflowStepJobQueuePosition": {
        "type": "object",
        "properties": {
          "support": {
            "$ref": "#/components/schemas/JobSupport"
          },
          "precedingJobs": {
            "type": "integer",
            "description": "Get the number of jobs preceding the current job",
            "format": "int32",
            "nullable": true
          },
          "estimatedStartDate": {
            "type": "string",
            "description": "Get an estimation as to when this job will start",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false
      }
    },
    "securitySchemes": {
      "ApiKey": {
        "type": "apiKey",
        "description": "Copy 'Bearer ' + valid Authorization token into field",
        "name": "Authorization",
        "in": "header"
      }
    }
  },
  "security": [
    {
      "ApiKey": []
    }
  ],
  "x-tagGroups": [
    {
      "name": "Models",
      "tags": [
        "Models"
      ]
    },
    {
      "name": "Consumer",
      "tags": [
        "Workflows"
      ]
    },
    {
      "name": "Provider",
      "tags": [
        "Providers",
        "Workers",
        "WorkerJobs",
        "Configurations"
      ]
    }
  ]
}